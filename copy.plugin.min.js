(function(a){var b={maximum:"5",copyfrom:"row",custommessage:"Maximum Number Exceed",dynamicname:true,removeclass:"delete"};function c(e,d){this.config=a.extend({},b,d);this.rowclassname="."+this.config.copyfrom;this.element=e.closest(this.rowclassname);this.getindex=a(this.rowclassname).length+1;this.button=e;this.init()}c.prototype.getAttributes=function(e){var d={};if(e.length){a.each(e[0].attributes,function(g,f){d[f.name]=f.value})}return d};c.prototype.dynamicAttribute=function(e,d){var f=a(d).attr(e);if(f!=undefined&&f!=""){newname=a(d).attr(e).split("_");lastvalue=newname.pop();namelength=newname.length;if(namelength>1){newname[namelength-1]=String(this.getindex);newname=newname.join("_")}else{newname=a(d).attr(e)+"_"+this.getindex}}return(newname)?newname:d};c.prototype.init=function(){var e=a(this.button).attr("class");if(this.config.maximum>this.getindex){$self=this;if(this.element.length>0){var f=this.element.clone();f.find("."+e).attr({"class":this.config.removeclass,value:"-"});if(this.config.dynamicname==true){var g={};a(f).find("input[type='text'],select,checkbox").each(function(){newname=$self.dynamicAttribute("name",this);a(this).attr("name",newname);newid=$self.dynamicAttribute("id",this);a(this).attr("id",newid)})}var d=this.getAttributes(f);d.html=f.html();a("<"+a(f).get(0).tagName+"/>",d).insertAfter(this.rowclassname+":last").on("click","."+this.config.removeclass,function(){a(this).closest($self.rowclassname).remove()})}else{return}}else{alert(this.config.custommessage)}};a.fn.copyrow=function(d){new c(this,d)}}(jQuery));